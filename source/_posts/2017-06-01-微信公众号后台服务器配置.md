---
title: 微信公众号后台服务器配置
date: 2017-06-01 10:16:29
categories: WeChat
---

本文是记录微信公众号后台服务器配置，主要有 服务器地址配置、JSSDK 域名设置、网页授权域名设置。
>本文是以主要是以 `Node.js` 语言开发的后台，其它语言的类似

## 一、服务器地址配置

微信公众号开发第一步，就是需要配置开发的服务器地址，如下图
![weichat-server-1](https://raw.githubusercontent.com/Jesse-Chiu/images/master/weichat-server-1.png)
对应的服务器端代码
```js
app.use('/weichat', require('./routes/index'));
```
上面的 `./routes/index` 是指定 微信相关的处理到统一个文件路口。

## 二、JSSDK 域名设置
当我们需要在页面中调用微信的功能接口时，就需要用到微信提供的 `JSSDK` 库，这时就需要在服务器端配置对应的域名地址。
**注意：设置的域名必须是要备案的域名**

![weichat-jssdk](https://raw.githubusercontent.com/Jesse-Chiu/images/master/weichat-jssdk.png)
对应的服务器端代码
```js
app.use('/weichat',express.static('src/assets'));
```
如上图所示，我设置的域名是 `jessechiu.com/weichat`，在后台认证时会去访问 `MP_verify_1NbyCgfIxWP76HnW.txt` 该文件，这样我们就需要把该文存放的路径设置为可以访问的。这里使用了 `express.static()` 函数。

## 三、网页授权域名设置
当我们在公众中需要跳转页面时，如果该页面的域名地址没有在微信后台中配置，在每次跳转时都会有个安全提示页面出现，这样用户体验相当不好，这时我们就需要设置对应的域名地址。

![weichat-jssdk](https://raw.githubusercontent.com/Jesse-Chiu/images/master/weichat-page.png)
对应的服务器端代码
```js
app.use('/weichat',express.static('src/assets'));
```
由于用到的 `MP_verify_1NbyCgfIxWP76HnW.txt` 文件和设置 `JSSDK` 域名一样，所以域名也设置和 `JSSDK` 中的一样。

