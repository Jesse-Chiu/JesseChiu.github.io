---
title: SSH 工具使用
date: 2017-05-20 10:16:29
categories: Linux
---

## 一、什么是 SSH

- SSH 是英文 Secure Shell 简写，是一种加密协议
- 是 C/S 架构
- 可以把所有传输的数据进行加密
- 防止攻击和 DNS\IP 欺骗
- 传输的数据是经过压缩的，所以可以加快传输的速度
- 可以代替Telnet，又可以为FTP、Pop、甚至为PPP提供一个安全的"通道"。

## 二、SSH 配置文件

### 1. liunux 中 ssh 服务端配置文件
- 默认路径：`/etc/ssh/sshd_config`
- 注意，如果在该目录下有 `/etc/ssh/ssh_config` 少了一个 `d` 的文件，这个是 linux 服务器中也安装了 ssh 客户端，指的就是该客户端配置文件。

### 2. 常用的配置项说明
- `Port	 22`									      #SSH端口设置，这里默认使用的是22端口
- `Protocol	2，1`							    #选择SSH协议版本
- `ListenAddress	 0.0.0.0`				  #监听的网卡IP
- `PermitRootLogin	 no`					    #是否允许root登入，默认是允许的
- `PasswordAuthentication yes`			#是否开启密码验证
- `PermitEmptyPasswords no`		      #是否允许密码为空
- `PrintMotd no`										#登入后是否显示一些信息，如上次登入时间及地点等。
- `PrintLastLog yes`								#显示上次登入的信息
- `KeepAlive yes`										#发送KeepAlive信息给客户端
- `MaxStartups 10`									#允许尚未登入的联机画面数
- `DenyUsers *`											#禁止用户登录，*表示所有用户
- `AllowUsers *`										#允许用户登录

## 三、操作实战
### 1. 基于口令方式认证
- ![putty 输入登入 ip 地址](http://od6sd4xau.bkt.clouddn.com/ssh-1.png)
其中的 4，5 步骤可选择跳过，建议保存，这样下次只要点击保存的会话名称，就可以直接登入到 `cmd` 界面，不用每次都输入一串 id 地址。
- ![输入用户名和密码](http://od6sd4xau.bkt.clouddn.com/ssh-2.png)

### 2. 基于密钥方式认证
在 SSH 2.0 协议中支持使用密钥方式登入
- 在 linux 服务器中使用 `ssh-keygen` 命令生成公钥与密钥
![生成 rsa 密钥](http://od6sd4xau.bkt.clouddn.com/ssh-3.png)
注意，在这步中生成的 **authroized_keys** 文件名称必须一样，不能错。

- 修改 **authroized_keys** 文件权限
`chmod 600 authroized_keys`，不然会限制访问

- 通过 winscp 把生成的 **id_rsa** 文件拷贝到本地
![使用 winscp 拷贝文件](http://od6sd4xau.bkt.clouddn.com/ssh-4.png)
![使用 winscp 拷贝文件](http://od6sd4xau.bkt.clouddn.com/ssh-5.png)

- 使用 `puttygen.exe` 软件转换上一步的 `id_rsa` 文件为 `*.ppk` 文件,因为 `putty` 不能识别 `ras` 文件，所有需要转换下
![puttygen.exe 转换文件](http://od6sd4xau.bkt.clouddn.com/ssh-6.png)

- 设置 putty 为密钥认证方式登入
![密钥方式登入-1](http://od6sd4xau.bkt.clouddn.com/ssh-7.png)
![密钥方式登入-2](http://od6sd4xau.bkt.clouddn.com/ssh-8.png)
![密钥方式登入-3](http://od6sd4xau.bkt.clouddn.com/ssh-9.png)

- 保存登入信息
![保存登入会话信息](http://images.jessechiu.com/ssh-10.png)

## 四、对应的客户端软件
- [putty 官网下载地址](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html)
- [Xshell]
- [SecureCRT]
- [Plink] 如果安装了 putty 客户端，默认就有该文件
- [winscp](http://winscp.net/eng/docs/lang:chs) windows 图形界面操作 linux 的文件传输


## 参考
- [ssh 协议介绍](http://blog.csdn.net/macrossdzh/article/details/5691924)



