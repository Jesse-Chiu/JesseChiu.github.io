---
title: 使用 toString() 方法来检测对象类型
date: 2016-10-27 12:16:31
updated: 2016-10-27 12:16:31
tags:
categories: JavaScript
feature:
---

## 一、概述

`toString()` 方法返回一个代表该对象的字符串。

## 二、语法

`object.toString()`

## 三、描述

当对象需要转换为字符串时，会调用它的 `toString()`方法。默认情况下，每个 **对象
** 都会从 `Object` 上继承到 `toString()` 方法，如果这个方法没有被这个对象 **自身** 或者 **更接近的上层原型** 上的同名方法覆盖(遮蔽)，则调用该对象的 `toString()` 方法时会返回 `"[object type]"`，这里的字符串 `type `表示了一个对象类型。下面的代码演示了这一点：

```javascript
var o = new Object();
o.toString();           // 返回了[object Object] 
```
** `[object Object]` 注意后面的  Object,首字母是大写**

> 从 JavaScript 1.8.5(ES5) 开始，在 `null` 值上调用 `toString()` 方法会返回 `[object Null]`，类似的, `undefined` 上会返回 `[object Undefined]`。

## 四、示例

1. 覆盖(遮蔽)默认的 `toString` 方法

可以自定义个方法来取代默认的 `toString()` 方法。该 `toString()` 方法不能传入参数并且必须返回一个字符串。自定义的 `toString()` 方法可以是任何我们需要的值，*but it will be most useful if it carries information about the object.*

在下面的代码中，定义了一个 Dog  对象数据类型，并且创建了该对象的一个实例：

```javascript
function Dog(name,breed,color,sex) {
   this.name=name;
   this.breed=breed;
   this.color=color;
   this.sex=sex;
}
theDog = new Dog("Gabby","Lab","chocolate","female");
```

如果当前的对象调用了 `toString()` 方法，它将会返回从 `Object` 继承下来的 `toString()` 方法的返回默认值：

`theDog.toString(); //returns [object Object]`

下面的代码中定义了一个叫做 `dogToString()` 的方法来覆盖默认的 `toString()` 方法。这个方法生成一个 `"property = value"` 形式的字符串，该字符串包含了当前对象的 name， breed，color 和 sex 的值。

```javascript
Dog.prototype.toString = function dogToString() {
  var ret = "Dog " + this.name + " is a " + this.sex + " " + this.color + " " + this.breed;
  return ret;
}
```

有了上面的这段代码之后，在上下文中任何时候使用 theDog ，JavaScript 都会自动调用 dogToString() 方法，并且返回下面的字符串内容：

Dog Gabby is a female chocolate Lab

2. 使用 `toString()` 方法来检测对象类型

可以通过 `toString()` 来获取每个对象的类型。为了每个对象都能通过 `Object.prototype.toString()` 来检测，需要以 `Function.prototype.call()` 或者 `Function.prototype.apply()` 的形式来调用，把需要检测的对象作为第一个参数传入。

```javascript
var toString = Object.prototype.toString;

toString.call(1); // [object Number]
toString.call(NaN); // [object Number]
toString.call(true); // [object Boolean]
toString.call(new String); // [object String]
toString.call([]);  // [object Array]
toString.call({}); // [object Object]
toString.call(function(){}); //[object Function]
toString.call(new Date); // [object Date]
toString.call(Math); // [object Math]

//Since JavaScript 1.8.5
toString.call(undefined); // [object Undefined]
toString.call(null); // [object Null]
```

## 参考
- [Object.prototype.toString()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toString#Using_toString_to_detect_object_type)