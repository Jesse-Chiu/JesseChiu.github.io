---
title: Linux 常用命令
date: 2017-05-21 10:16:29
categories: Linux
---

## 一、用户和组
1、Linux 使用 User 和 Group 控制使用者对文件的存取权限
2、用户使用账号和口令登录 Linux
3、每个文件都有 owner，并且 owner 属于某个 Group
4、每个程序都有 owner 和 Group

### 用户
1、每个用户都有一个唯一的 UserID
2、User 的信息存储在 `/etc/passwd` **文件** 中，可以通过 `less /etc/passwd` 来查看
例如其中的一条：`kuku:x:1001:1002:handsome:/home/kuku:/bin/bash`
- kuku: 用户名
- x: 表示登入时需要密码，可以编辑该文件，把 `x` 去掉，这样就不需要密码登入
- 1001: 用户 id
- 1002: 组 id
- handsome: 用户的描述信息
- `/home/kuku`: 登入时默认进入的 `home` 目录
- `/bin/bash`: 登入时默认允许的程序

3、用户密码信息文件 `/etc/shadow`，也是一个文本文件，可用 `less` 打开查看
4、每个 User 都有一个 home 目录
5、User 未经授权将禁止读写或执行其他 User 的文件
6、root 用户解读
- 超级管理员账号，具有至高无上的权限
- 一般不要随便用 root 登录并操作系统

### 用户权限设置
- ![文件权限验证流程](http://od6sd4xau.bkt.clouddn.com/linux-1.png)
- ![设置文件权限](http://od6sd4xau.bkt.clouddn.com/linux-2.png)
- 如果想一起设置文件夹和文件夹下所有文件的权限，可以加一个 `R` 参数，例如：`chmod -R 555 jesse`。注意这里的 `R` 是大写的，在 liunux 命令中是区分大小写


## 二、文件压缩打包
1、文件压缩
	通过压缩算法将文件的体积缩小，同时会将多个文件合并至一起方便交换、传输。
2、文件打包
	将多个文件或者整个目录合并成一个文件，用来进行文件的备份、分发、传输等。
3、Linux支持的压缩格式
	1）*.Z ，compress 程序压缩文件 // 目前已被淘汰
	2）*.gz ，gzip 程序压缩文件 // 目前使用最多
	3）*.bz2，bzip2 程序压缩文件 // 比 gz 有更好的压缩比，用来取代 gz
	4）*.tar，tar 程序打包文件，并未压缩
	5）*.tar.gz，tar 打包的档案，使用 gzip压缩
	6）*.tar.bz2，tar 打包的文件，使用 bzip2压缩

#### 压缩指令
1、gzip [-cdtv#] 文件名称
	1）扩展名为*.gz
	2）-c：将压缩的数据输出到屏幕上
	3）-d：解压缩的参数
	4）-t：进行文件的一致性校验看是否损坏
	5）-v：显示和原文件相比的压缩比
	6）-#：压缩等级，-1最快，-9最慢，默认是-6
注意，默认压缩后会把原文件删除，可以通过：`gzip -c xxx > xxx.gz` 其中的 `xxx` 是文件名

2、bzip2 [-cdkzv#] 文件名称
	1）扩展名为*.bz2
	2）-c：将压缩的数据输出到屏幕上
	3）-d：解压缩的参数，该参数代表执行解压缩操作
	4）-k：保留原文件并不删除原始文件
	5）-z：压缩的参数，该参数代表是执行压缩操作
	6）-v：显示和原文件对比的压缩比
	7）-#：压缩等级，-1最快，-9最慢，默认是-6

3、xz [-zk#] 文件名称
xz 是大部分 linux 默认的压缩工具，压缩利率比 bzip2 还好，是压缩率之王，就是会慢点
	1）扩展名为*.xz
	2）-c：将压缩的数据输出到屏幕上
	3）-d：解压缩的参数，该参数代表执行解压缩操作
	4）-k：保留原文件并不删除原始文件
	5）-z：压缩的参数，该参数代表是执行压缩操作
	6）-v：显示和原文件对比的压缩比
	7）-#：压缩等级，-1最快，-9最慢，默认是-6

创建 *.tar.xz 压缩文件
1) `tar cvf xxx.tar xxx` : 这样创建 xxx.tar 文件先
2) `xz -z xxx.tar` : 将 xxx.tar 压缩成为 xxx.tar.xz

解压 *.tar.xz 压缩文件
1) `xz -d xxx.tar.xz` : 将 xxx.tar.xz 解压成 xxx.tar
2) `tar xvf xxx.tar`

#### 打包指令
1、tar [-jcv] –f finaname.tar.bz2 待压缩的档案或者目录名
将某个文件或者目录打包并使用 bzip2 压缩成一个文件

2、tar [-jxv] –f filename.tar.bz2 –C 解压缩的目录
将压缩文件解压缩至特定的目录

3、参数解释
	1）-c：建立打包档案
	2）-t：查看打包的文件都有哪些文件名
	3）-x：解压缩或者解打包文件，和-C搭配使用解压缩至特定目录
	4）-j：通过bz2支持进行压缩或者解压缩
	5）-z：使用gzip进行压缩或者解压缩
	6）-v：将正在处理的文件名显示出来
	7）-f：紧跟要被处理的文件名，建议单独写一个选项

## 三、linux 目录结构
### 重要目录
1、home 目录
	1）root 用户的 home 目录是 /root，只用 root 用户的家目录是在跟目录下，其它都在 home 下
	2）普通用户的目录是 /home/userx

2、bin 目录
	1）常用的可执行文件
	2）/bin、/usr/bin、/sbin(该目录下主要是 root 权限的可执行文件) 等

3、外部设备 mountpoint
	1）/media、/mnt
	2）当检测到设备接入会自动产生挂载点

4、/etc，系统的配置文件
5、/tmp，临时文件
6、/boot，系统内核和开机必要文件
7、/dev，系统所有的设备文件
8、/usr
	1）unix system resource
	2）保存程序的相关文件
	ps：类似 window 系统中的 program 和 window 目录结合
9、/lost+found
1）每个分区都会自动创建
10、/var(用户运行时的数据存放点，例如数据库)、/srv
11、/proc(存在内存，主要是进程，网络等信息)
12、/lib、/usr/lib、/usr/locat/lib


## 常用命令
- set 查看用户自定义变量，如果是要定义变量: `key=value` 方式，删除变量使用，`unset key`
ps: 自定义变量只在当前 `shell` 环境中有效，如果要把自定义变量转为环境变量使用 `export`,例如要将 `/home/rongdeguo/Code` 加入到环境变量中，可以在 shell 中输入
`export PATH=$PATH:/home/rongdeguo/Code`

- env 查看环境变量
ps: 如果需要一行一行看可以使用 管道和 `more`，例如：`set | more`，在整理主机的 `shell` 环境下有效.如果要删除使用 `unset` 命令

- echo 获取变量值，例如：`echo $name`，前面的 `$` 是对变量引用
- 设置别名：
```bash
alias cls='clear'
type cls
```
- 查看所以别名：`alias` 类似 `set` 和 `env`,删除使用 `unalias`
- 显示当前日历：`cal`，注意这里是 **日历**信息
- 查看指令存在那个位置：`witch`
- `/etc/profile` 文件是启动 shell 时自动运行文件，如果需要添加自启动程序，可以添加到该文件中。
- `source` 命令，重新加载指定脚本变更
- 目录切换
	* 切换到上次目录：`cd -`
	* 切换到家目录：`cd ~`
- 拷贝：`cp [option] finaname 目标路径`
- 删除：`rm [option] finaname 目标路径`
- 移动/重命名：`mv [option] finaname 目标路径`
ps：上面三个命令参数：
	* -i 交付式
	* -r 递归，在拷贝删除目录时需要加该参数
	* -f 强制，不出现提示，直接操作命令
- 新建：`touch、mkdir [option] finaname 目标路径`
- 确定文件格式：`file [option] finaname`

- ls，ls[options][file_or_dirs]
	1）ls，列出当前目录内容
	2）ls / ，显示根目录的内容
	3）ls –a，显示隐藏文件
	4）ls –l，显示详细内容
	5）ls –ld，显示目录本身的属性
	6）ls –lh，文件大小可以显示为 `k` 单位

- 查看系统安装了哪些软件
	* 查看所有软件: `rpm -aq` 
	* 查看指定名字的软件：rpm -aq|grep 软件名

- 查看内核/操作系统/CPU信息: `uname -a`  
- 查看端口占用：`netstat –apn | grep 8080`

## 参考
- [Linux 命令大全](http://man.linuxde.net/)
- [Linux 设置环境变量](http://www.cnblogs.com/haore147/p/3633116.html)